(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var s=n(6),c=n.n(s),o=n(2),a=n(1),i=(n(12),n(13),n(14),n(0)),r=function(t){var e=t.posts,n=t.selectedPostId,s=t.getSelectedPost;return Object(i.jsxs)("div",{className:"PostsList",children:[Object(i.jsx)("h2",{children:"Posts:"}),Object(i.jsx)("ul",{className:"PostsList__list","data-cy":"postDetails",children:e.map((function(t){return Object(i.jsxs)("li",{className:"PostsList__item",children:[Object(i.jsxs)("div",{children:[Object(i.jsx)("b",{children:"[User #".concat(t.userId,"]: ")}),t.title]}),n===t.id?Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return s(0)},children:"Close"}):Object(i.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){return s(t.id)},children:"Open"})]},t.id)}))})]})},l=n(7),u="https://mate.academy/students-api",d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch("".concat(u).concat(t),e).then((function(t){return t.json()}))},j=function(t){return d(t?"/posts?userId=".concat(t):"/posts")},m=(n(16),function(t){var e=t.addComment,n=Object(a.useState)(""),s=Object(o.a)(n,2),c=s[0],r=s[1],l=Object(a.useState)(""),u=Object(o.a)(l,2),d=u[0],j=u[1],m=Object(a.useState)(""),b=Object(o.a)(m,2),h=b[0],O=b[1];return Object(i.jsxs)("form",{className:"NewCommentForm",onSubmit:function(t){t.preventDefault(),e(c,d,h),r(""),j(""),O("")},children:[Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",value:c,onChange:function(t){return r(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:"NewCommentForm__input",value:d,onChange:function(t){return j(t.target.value)}})}),Object(i.jsx)("div",{className:"form-field",children:Object(i.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",value:h,onChange:function(t){return O(t.target.value)}})}),Object(i.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})}),b=(n(17),function(t){var e=t.selectedPostId,n=Object(a.useState)(null),s=Object(o.a)(n,2),c=s[0],r=s[1],u=Object(a.useState)([]),j=Object(o.a)(u,2),b=j[0],h=j[1],O=Object(a.useState)(!1),p=Object(o.a)(O,2),f=p[0],x=p[1],_=function(){var t;(t=e,d("/posts/".concat(t))).then((function(t){return r(t)}))},N=function(){var t;(t=e,d("/comments?postId=".concat(t))).then((function(t){return h(t)}))};Object(a.useEffect)((function(){_(),N()}),[e]);var v=function(t){(function(t){return d("/comments/".concat(t),{method:"DELETE"})})(t).then((function(e){e&&h(b.filter((function(e){return e.id!==t})))}))};return Object(i.jsxs)("div",{className:"PostDetails",children:[Object(i.jsx)("h2",{children:"Post details:"}),Object(i.jsx)("section",{className:"PostDetails__post",children:Object(i.jsx)("p",{children:null===c||void 0===c?void 0:c.body})}),Object(i.jsxs)("section",{className:"PostDetails__comments",children:[b.length?Object(i.jsx)("button",{type:"button",className:"button",hidden:b.length<1,onClick:function(){x(!f)},children:f?"Hide comments":"Show comments"}):Object(i.jsx)("p",{className:"PostDetails__list-item",children:"There are not any comments"}),f&&Object(i.jsx)("ul",{className:"PostDetails__list",children:b.map((function(t){return Object(i.jsxs)("li",{className:"PostDetails__list-item",children:[Object(i.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return v(t.id)},children:"X"}),Object(i.jsx)("p",{children:t.body})]},t.id)}))})]}),Object(i.jsx)("section",{children:Object(i.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(i.jsx)(m,{addComment:function(t,n,s){(function(t){return d("/comments",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)})})({postId:e,name:t,email:n,body:s}).then((function(t){h((function(e){return[].concat(Object(l.a)(e),[t])}))}))}})})})]})}),h=function(){var t=Object(a.useState)([]),e=Object(o.a)(t,2),n=e[0],s=e[1],c=Object(a.useState)(0),l=Object(o.a)(c,2),u=l[0],m=l[1],h=Object(a.useState)([]),O=Object(o.a)(h,2),p=O[0],f=O[1],x=function(t){j(t).then(s)};return Object(a.useEffect)((function(){x(),d("/users").then((function(t){f(t.slice(0,10))}))}),[]),Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)("header",{className:"App__header",children:Object(i.jsxs)("label",{children:["Select a user: \xa0",Object(i.jsxs)("select",{className:"App__user-selector",onChange:function(t){x(+t.target.value)},children:[Object(i.jsx)("option",{disabled:!0,defaultValue:"Chose user",children:"Choose user"}),p.map((function(t){return Object(i.jsx)("option",{value:t.id,children:t.name},t.id)}))]})]})}),Object(i.jsxs)("main",{className:"App__main",children:[Object(i.jsx)("div",{className:"App__sidebar",children:Object(i.jsx)(r,{posts:n,selectedPostId:u,getSelectedPost:m})}),Object(i.jsx)("div",{className:"App__content",children:!!u&&Object(i.jsx)(b,{selectedPostId:u})})]})]})};c.a.render(Object(i.jsx)(h,{}),document.getElementById("root"))}],[[18,1,2]]]);
//# sourceMappingURL=main.1ceac6bc.chunk.js.map